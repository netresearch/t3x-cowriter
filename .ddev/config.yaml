name: t3-cowriter
type: php
docroot: ""
no_project_mount: true
php_version: "8.5"
composer_version: "2"
webserver_type: apache-fpm
router_http_port: "80"
router_https_port: "443"
xdebug_enabled: false
database:
  type: mariadb
  version: "11.4"
additional_hostnames:
  - docs.t3-cowriter
  - v14.t3-cowriter
additional_fqdns: []
use_dns_when_possible: true
nodejs_version: "22"
hooks:
  post-start:
    - exec-host: |
        # Capture git info and write to container automatically on every ddev start
        BRANCH=$(git rev-parse --abbrev-ref HEAD 2>/dev/null || echo "unknown")
        COMMIT=$(git rev-parse --short HEAD 2>/dev/null || echo "unknown")
        PR=$(gh pr view --json number -q .number 2>/dev/null || echo "unknown")

        # Write git info as JSON to web container
        ddev exec "printf '{\"branch\":\"%s\",\"commit\":\"%s\",\"pr\":\"%s\"}' '$BRANCH' '$COMMIT' '$PR' > /var/www/html/.git-info.json"

        echo "ðŸ“‹ Git info updated: Branch=$BRANCH, Commit=$COMMIT, PR=$PR"
