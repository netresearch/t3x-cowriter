CKEDITOR.dialog.add("cowriterDialog",function(t){return{title:"Cowriter",minWidth:400,minHeight:70,contents:[{id:"tab-basic",label:t.lang.common.generalTab,accessKey:"C",elements:[{type:"textarea",id:"cowriter",label:"Worüber soll ich schreiben?",rows:6,validate:CKEDITOR.dialog.validate.notEmpty("Deine Beschreibung darf nicht leer sein."),setup:function(e){this.setValue(e.getText())},commit:async function(e){var a,o;e.setText(" Loading … ");const i="text-davinci-003",r=3e3,n=await(await fetch("https://api.openai.com/v1/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+OPENAI_KEY,"OpenAI-Organization":OPENAI_ORG},body:JSON.stringify({prompt:this.getValue(),max_tokens:r,model:i,temperature:.9,top_p:1,n:1,frequency_penalty:0,presence_penalty:0})})).json();console.log(n),(a=n.choices[0])!=null&&a.text?e.setText((o=n.choices[0])==null?void 0:o.text):e.setText(" Error: "+n.error)}}]},{id:"tab-advanced",label:t.lang.common.advancedTab,elements:[{type:"select",id:"model",label:"Wähle ein Modell",default:"text-davinci-003",items:[["Davinci","text-davinci-003"],["Curie","text-curie-001"],["Babbage","text-babbage-001"],["Ada","text-ada-001"]],setup:function(e){this.setValue(e.getText())}},{type:"text",inputStyle:"width: 50px",id:"max_tokens",label:"Wie viele Wörter sollen es werden?",default:500,validate:()=>CKEDITOR.dialog.validate.regex(/^[1-9][0-9]{0,2}$/,"Deine Eingabe muss eine Zahl zwischen 1 und 1000 sein."),setup:function(e){e.setAttribute("title","number"),this.setValue(e.getText())},commit:function(e){e.setAttribute("type","number")}}]}],onOk:function(){var e=this,i=t.document.createElement("cowriter");e.commitContent(i),t.insertElement(i)}}});CKEDITOR.plugins.add("cowriter",{icons:"cowriter",lang:["en","de"],init:function(t){t.addCommand("cowriter",new CKEDITOR.dialogCommand("cowriterDialog")),t.ui.addButton("Cowriter",{label:"Co-Writer",command:"cowriter",toolbar:"insert",icon:"https://netresearch.github.io/ckeditor-cowriter/icons/cash-register.svg"})}});CKEDITOR.config.keystrokes=[[CKEDITOR.ALT+67,"cowriter"]];
//# sourceMappingURL=plugin.js.map